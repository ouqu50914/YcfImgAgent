# 实现工作流编辑器的撤销和取消撤销功能

## 实现步骤

### 1. 修改 Sidebar.vue 组件
- 在左侧栏底部添加撤销和取消撤销按钮
- 使用 Element Plus 的图标和按钮组件
- 确保按钮样式与现有导航按钮一致
- 添加适当的提示文本

### 2. 在 Workflow.vue 中实现撤销/取消撤销逻辑
- 创建两个栈：`undoStack` 用于存储可撤销的操作，`redoStack` 用于存储可重做的操作
- 实现 `saveState` 函数，用于将当前工作流状态保存到撤销栈
- 实现 `undo` 函数，用于撤销上一步操作
- 实现 `redo` 函数，用于取消撤销操作
- 在关键操作点（如添加/删除节点、添加/删除连接等）调用 `saveState` 函数

### 3. 绑定按钮事件
- 在 Sidebar.vue 中添加事件处理函数，调用 Workflow.vue 中的 `undo` 和 `redo` 方法
- 使用 Vue 的 provide/inject 或事件总线来实现组件间通信

### 4. 状态管理
- 跟踪撤销栈和重做栈的状态，更新按钮的启用/禁用状态
- 确保按钮在没有可撤销/重做操作时显示为禁用状态

### 5. 快捷键支持
- 确保现有的 Ctrl+Z (撤销) 和 Ctrl+Y (重做) 快捷键能够正常工作
- 与按钮操作保持一致的行为

## 技术实现细节

### 状态保存格式
- 每次操作保存完整的工作流状态，包括节点和连接
- 使用深拷贝确保状态的独立性

### 性能优化
- 限制撤销栈的大小，避免内存占用过大
- 合并连续的相同类型操作，减少栈的大小

### 用户体验
- 添加操作成功的提示信息
- 确保按钮状态与实际可用操作一致
- 保持与现有 UI 风格的一致性

## 文件修改

1. **Frontend/src/components/Sidebar.vue** - 添加撤销和取消撤销按钮
2. **Frontend/src/views/Workflow.vue** - 实现撤销/取消撤销核心逻辑

## 预期效果

- 用户可以通过左侧栏底部的按钮执行撤销和取消撤销操作
- 用户可以通过快捷键执行相同的操作
- 按钮状态会根据可执行的操作自动更新
- 工作流编辑器的操作历史得到有效管理